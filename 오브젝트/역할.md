## 역할

## 역할과 협력

객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합을 역할이라고 부른다.

실제로, 협력을 모델링할 때는 특정한 객체가 아니라 역할에게 책임을 할당한다고 생각하는 것이 좋다.

<br/>

예를 들어, 밑에 있는 글은 두 개의 독립적인 단계가 합쳐진 것이다.

```
영화 예매 협력에서 '예매하라'라는 메시지를 처리하기에 적합한 객체로 Screening을 선택했다.
```

- 첫번째 : 영화를 예매할 수 있는 적절한 역할이 무엇인가를 찾는 것이고,

- 두번째 : 역할을 수행할 객체로 Screening 인스턴스를 선택하는 것이다.

<br/>

### 궁금증

```
역할이라는 개념을 이용해서 설계 과정을 더 번거롭게 만드는 것일까?

어차피 역할이 없어도 객체만으로 충분히 협력을 설계할 수 있는 것이 아닌가?
```

<br/><br/>

## 유연하고 재사용 가능한 협력

역할이 중요한 이유는 역할을 통해 유연하고 재사용 가능한 협력을 얻을 수 있기 때문이다.

영화 예매 도메인에는 `금액 할인 정책`과 `비율 할인 정책`이라는 두가지 종류의 가격 할인 정책이 존재 한다.

<br/>

때문에 `‘금액 할인 정책’` 인스턴스와 `‘비율 할인 정책’` 인스턴스라는 두가지 종류의 

개체가 `‘할인 요금을 계산하라’` 메시지에 응답할 수 있어야 한다.

<br/>

하나씩 구현한다면 이런 방법으로 대부분의 코드가 중복되고 말것이다.

![이미지](/img/오브젝트5.PNG)

![이미지](/img/오브젝트6.PNG)

<br/><br/>

## 문제 해결 방법

객체가 아닌 책임에 초점을 맞춰야 한다는 것이다.

순수하게 책임의 관점에서 두 협력을 바라보며 두가지 모두 `‘할인 요금 계산'`이라는 동일한 책임을 수행한다는 것이다.

<br/>

따라서, 객체라는 존재를 지우고 `‘할인 요금을 계산하라’`라는 메시지에 응답할 수 있는 

대표자를 생각한다면 두 협력을 하나로 통합할 수 있을 것이다.

```
역할은 다른 것으로 교체할 수 있는 책임의 집합이다.
```

![이미지](/img/오브젝트7.PNG)

한가지 더 설명하자면, 그림에 ‘역할’ 부분에 들어갈 것은 추상화라는 것이다.

즉, 포괄할 수 있는 추상적인 이름을 부여해야 한다.

<br/>

요점은 동일한 책임을 수행하는 역할을 기반으로 두개의 협력을 하나로 통합할 수 있다는 것이다.

역할을 이용하면 불필요한 중복 코드를 제거할 수 있다.

더 좋은 소식은 협력이 더 유연해졌다는 점이다.

<br/><br/>

## 객체 vs 역할

```
객체에 관해 생각할 때 '이 객체가 무슨 역할을 수행해야 하는가?'라고 자문하는 것이 도움이 된다.
```

다시 말해, 협력에 적합한 책임을 수행하는 대상이 한 종류라면 간단하게 객체로 간주한다.



만약, 여러종류의 객체들이 참여할 수 있다면 역할이라고 부르면 된다.

<br/>

설계 초반에는 적절한 책임과 협력의 큰 그림을 탐색하는 것이 가장 중요한 목표여야 하고 

역할과 객체를 명확하게 구분하는 것은 그렇게 중요하지는 않다는 것이다.

```
따라서, 애매하다면 단순하게 객체로 시작하고 반복적으로 책임과 협력을 정제해가면서 
필요한 순간에 객체로부터 역할을 분리해내는 것이 가장 좋은 방법이다.
```

<br/>

처음에 특정 시나리오에 대한 협력을 구상할 때는 아마도 도메인 모델에 있는 

개념들을 후보로 선택해 직접 책임을 할당할 것이다.

<br/>

당연한 시나리오를 설계로 옮기면서 협력을 지속적으로 정제하다 보면 두협력이 

거의 유사한 구조를 보인다는 것을 발견하게 될 것이다.

<br/>

중요한 것은 협력을 구체적인 객체가 아니라 추상적인 역할의 관점에서 

설계하면 협력이 유연하고 재사용 가능해진다는 것이다. 

따라서 역할의 가장 큰 장점은 설계의 구성 요소를 추상화할 수 있다는 것이다.

<br/><br/>

## 배우와 배역

```
- 배역은 연극 배우가 특정 연극에서 연기하는 역할이다.

- 배역은 연극이 상영되는 동안에만 존재하는 일시적인 개념이다.

- 연극이 끝나면 연극 배우는 배역이라는 역할을 벗어 버리고 원래의 연극 배우로 돌아온다.
```



동일한 배역을 여러 명의 배우들이 연기할 수 있다는 것이다.

또한, 배우들을 자신이 배우로 있는 동안 하나 이상의 연극에 참여해서 다양한 역할을 연기한다.

<br/>

```
- 서로 다른 배우들이 동일한 배역을 연기할 수 있다.

- 하나의 배우가 다양한 연극 안에서 서로 다른 배역을 연기할 수 있다.
```

협력은 연극과 동일하고 코드는 극본과 동일하다. 

배우는 연극이 상영될 때 배역이라는 특정한 역할을 연기한다. 

<br/>

객체는 협력이라는 실행 문맥 안에서 특정한 역할을 수행한다.

하나의 배역을 여러 배우가 연기할 수 있는 것처럼 동일한 역할을 수행하는 하나 이상의 객체들이 존재 할 수 있다.

<br/>

따라서, 객체는 다양한 역할을 가질 수 있다.

객체가 다른 협력에 참여할 때는 이전의 역할은 잊혀지고 해당 협력에서 바라보는 역할의 측면에서 보여질 것이다.

<br/><br/>

>**Reference** 
> <br/> [오브젝트](http://www.yes24.com/Product/Goods/74219491)