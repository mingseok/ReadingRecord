## 메시지와 인터페이스

## 클라이언트 - 서버 모델

협력은 어떤 객체가 다른 객체에게 무언가를 요청할 때 시작된다.

메시지는 객체 사이의 협력을 가능하게 하는 매개체이다.

<br/>

객체가 다른 객체에게 접근할 수 있는 유일한 방법은 메시지를 전송하는 것뿐이다.

협력 안에서는 메시지를 전송하는 객체를 클라이언트, 메시지를 수신하는 객체를 서버라고 부른다.

<br/>

협력은 클라이언트가 서버의 서비스를 요청하는 단방향 상호작용이다.

클라이언트인 Screening은 ‘가격을 계산하라’ 메시지를 전송함으로써 도움을 요청하고 

<br/>

서버인 Movie는 가격을 계산하는 서비스를 제공함으로써 메시지에 응답한다.

```
객체는 협력에 참여하는 동안 클라이언트와 서버의 역할을 동시에 수행하는 것이 일반적이다.
```

두 객체 사이의 협력을 가능하게 해주는 매개체가 바로 메시지라는 것이다.

<br/><br/>

## 메시지와 메시지 전송

메시지는 객체들이 협력하기 위해 사용할 수 있는 유일한 의사소통 수단이다.

한 객체가 다른 객체에게 도움을 요청하는 것을 ‘메시지 전송’ 또는 ‘메시지 패싱’이라고 부른다.

<br/>

이때, 메시지를 전송하는 객체를 메시지 전송자라고 부르고, 메시지를 수신하는 객체를 메시지 수진자라고 부른다.

클라이언트 - 서버 모델 관점에서는 메시지 전송자를 클라이언트라고 부르고 메시지 수신자는 서버라고 부른다.

<br/>

메시지는 오퍼레이션명과 인자로 구성되며 메시지 전송은 여기에 메시지 수신자를 추가한 것이다.

```
condition.isSatisfiedBy(screening);
  수신자   오퍼레이션명     인자
```

<br/><br/>

## 퍼블릭 인터페이스와 오퍼레이션

외부의 객체는 오직 객체가 공개하는 메시지를 통해서만 객체와 상호작용할 수 있다.

이처럼 객체가 의사소통을 위해 외부에 공개하는 메시지의 집합을 퍼블릭 인터페이스라고 부른다.

<br/>

퍼블릭 인터페이스에 포함된 메시지를 오퍼레이션이라고 부른다.

오퍼레이션은 수행 가능한 어떤 행동에 대한 추상화다.

<br/>

흔히 오퍼레이션이라고 부를 때는 내부의 구현 코드는 제외하고 단순히 메시지와 

관련된 시그니처를 가리키는 경우가 대부분이다.

<br/>

그에 비해 메시지를 수신했을 때 실제로 실행되는 코드는 메서드라고 부른다.

<br/><br/>

## 디미터 법칙

자바나 C# 과 같이 ‘도트(.)’ 를 이용해 메시지 전송을 표현하는 언어에서는 

“오직 하나의 도트만 사용하라” 라는 말로 요약 되기도 한다.

<br/>

디미터 법칙을 위반하는 코드의 전형적인 모습은 이렇다.

```java
screening.getMovie().getDiscountConditions();
```



메시지 수신자의 캡슐화는 무너지고, 메시지 전송자가 메시지 수신자의 내부 구현에 강하게 결합된다.

<br/>

### 디미터 법칙대로 코드를 개선하면 이렇다.

```java
screening.calculateFee(audienceCount);
```

메시지 전송자는 더 이상 메시지 수신자의 내부 구조에 관해 묻지 않게 된다.

단지 자신이 원하는 것이 무엇인지를 명시하고 단순히 수행하도록 요청한다.

<br/><br/>

## 의도를 드러내는 인터페이스

이런 스타일 코드는 좋지 않은데 그 이유를 두가지로 요약할 수 있다.

```java
public class PeriodCondition {
    public boolean isSatisfiedByPeriod(Screening screening) { ... }
}

public class SequenceCondition {
    public boolean isSatisfiedBySequence(Screening screening) { ... }
}
```

- 첫번째 : 메서드의 이름이 다르기 때문에 두 메서드의 내부 구현을 정확하게 이해하지 못한다면 

    두 메서드가 동일한 작업을 수행한다는 사실을 알아채기 어렵다.

- 두번째 : 메서드 수준에서 캡슐화를 위반한다는 것이다.

<br/>

### 중요한 것은 이거다.

```
메서드의 이름을 짓는 방법은 ‘어떻게’가 아니라 ‘무엇을’ 하는지를 드러내야 한다.
```

<br/>

코드를 수정해보면 인터페이스로 수정할 수 있을 것이다.

```java
public interface DiscountCondition {
   boolean isSatisfiedBy(Screening screening);
}
```

인터페이스를 실체화하게 하면 클라이언트 입장에서 두 메서드를 동일한 방식으로 사용할 수 있게 된다.


<br/><br/>

>**Reference** 
> <br/> [오브젝트](http://www.yes24.com/Product/Goods/74219491)
